# Oracle-API-Bridge
"Oracle API Bridge" — это API сервис на Django, который позволяет выполнять SQL запросы и процедуры в базе данных Oracle 12 и выше, возвращая результаты в формате JSON по запросу пользователя.

# Описание сервиса "Oracle API Bridge"
"Oracle API Bridge" — это высокоэффективный API сервис на базе Django, предназначенный для взаимодействия с базой данных Oracle 12 и выше. Сервис позволяет пользователям выполнять SQL запросы и вызывать хранимые процедуры с передачей параметров через удобный JSON интерфейс. Результаты запросов возвращаются в формате JSON, представляющем собой либо обычный JSON, либо JSON data table — удобный формат для обработки табличных данных в клиентских приложениях.

# Особенности сервиса:
Многофункциональность: Поддержка выполнения SQL запросов и хранимых процедур в базе данных Oracle.
Гибкость форматов: Возможность получения результатов в двух форматах JSON: обычный JSON и JSON data table.
Безопасность и аутентификация: Использование авторизации по токену для защиты API от несанкционированного доступа.
# Технологии:
Django и Django REST Framework: Основа для разработки мощного и надежного API сервиса.
Oracle Instant Client: Интеграция с клиентскими библиотеками Oracle для оптимальной производительности и безопасности соединений.
Сервис реализован на базе Windows. 
Виртуальная машина Conda. Файл виртуальной машины прилогается, его легко можно изменить под Linux системы.
# Лицензирование:
GPL (General Public License) с исключением коммерческого использования. Бесплатное использование только для некоммерческих целей для коммерческих случаев требуется лицензия.
# Использование, браузер:
Целевые страницы <br>
'api/query/',<br>
'api/data_table/'<br>
принимают POST запросы в формате JSON, для простых запросов (<Любой SQL>), формат<br>
{<br>
  "sql": "<SQL>"<br>
}<br>
для исполнения процедур<br>
{<br>
  "sql": "CALL <Процедура>",<br>
  "params": {<br>
    ":p_date": "2024-06-06 00:00:00",<br>
    ":p_shift": 2,<br>
    ":param4": {"type": "DB_TYPE_CURSOR", "dir": "OUT"}<br>
  }<br>
}<br>
Для выполнения процедур достаточно указать в параметре "sql" запуск на выполнение CALL процедуры. В парпметре "params" обязательно необходимо указать параметры процедуры в соответствующем процедуре порядке, 
такте необходимо соблюдать указанный в примере формат даты (YYYY-MM-DD, YYYY-MM-DD hh:mm:ss).<br>
В примере представлен вариант с присутствием в параметрах как входных так и выходных параметров запроса (если процедура процедура не предусматривает параметров или их части, то они просто не указываются).
Все зпросы выполняются только от зарегистрированного пользователя.
# Curl запросы
Предусмотренно два варианта авторизации по логину и паролю либо по токену. Предпочтительным вариантом является токен. Токен генерируется системой в административном интерфейсе.<br>
curl -X POST -H "Authorization: Token 758da82de5adc184c9fde30f2fd71901f112ee17" -H "Content-Type: application/json" -d "{\"sql\": \"CALL <Процедура>\", \"params\": {\":p_date\": \"2024-06-06 00:00:00\", \":p_shift\": 2, \":param4\": {\"type\": \"DB_TYPE_CURSOR\", \"dir\": \"OUT\"}}}" http://localhost/api/data_table/<br>
curl -X POST -H "Authorization: Token 758da82de5adc184c9fde30f2fd71901f112ee17" -H "Content-Type: application/json" -d "{\"sql\": \"CALL <Процедура>\", \"params\": {\":p_date\": \"2024-06-06 00:00:00\", \":p_shift\": 2, \":param4\": {\"type\": \"DB_TYPE_CURSOR\", \"dir\": \"OUT\"}}}" http://localhost/api/query/
